{"ast":null,"code":"var _jsxFileName = \"C:\\\\Work\\\\\\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0430\\\\\\u041E\\u0431\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435 Edemu JS\\\\\\u0422\\u0435\\u043C\\u044B\\\\Marvel\\\\marvel_starter\\\\src\\\\components\\\\comicsList\\\\ComicsList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport useMarvelService from '../../services/MarvelService';\nimport Spinner from '../spinner/Spinner';\nimport ErrorMessage from '../errorMessage/ErrorMessage';\nimport './comicsList.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ComicsList = () => {\n  _s();\n  const [comicsList, setComicsList] = useState([]);\n  const [newItemLoading, setNewItemLoading] = useState(false);\n  const [offset, setOffset] = useState(0);\n  const [comicsEnded, setComicsEnded] = useState(false);\n  const {\n    loading,\n    error,\n    getAllComics\n  } = useMarvelService();\n  useEffect(() => {\n    onRequest(offset, true);\n  }, [offset]); // Include 'offset' in the dependency array\n\n  const onRequest = (offset, initial) => {\n    initial ? setNewItemLoading(false) : setNewItemLoading(true);\n    getAllComics(offset).then(onComicsListLoaded);\n  };\n  const onComicsListLoaded = newComicsList => {\n    let ended = false;\n    if (newComicsList.length < 8) {\n      ended = true;\n    }\n    setComicsList(prevList => [...prevList, ...newComicsList]);\n    setNewItemLoading(false);\n    setOffset(prevOffset => prevOffset + 8);\n    setComicsEnded(ended);\n  };\n  function renderItems(arr) {\n    const items = arr.map((item, i) => {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"comics__item\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.thumbnail,\n            alt: item.title,\n            className: \"comics__item-img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comics__item-name\",\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comics__item-price\",\n            children: item.price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"comics__grid\",\n      children: items\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 12\n    }, this);\n  }\n  const items = renderItems(comicsList);\n  const errorMessage = error ? /*#__PURE__*/_jsxDEV(ErrorMessage, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 32\n  }, this) : null;\n  const spinner = loading && !newItemLoading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 48\n  }, this) : null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comics__list\",\n    children: [errorMessage, spinner, items, /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: newItemLoading,\n      style: {\n        display: comicsEnded ? 'none' : 'block'\n      },\n      className: \"button button__main button__long\",\n      onClick: () => onRequest(offset),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inner\",\n        children: \"load more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(ComicsList, \"pmj/r6zQRPwMCZjorGF/Csnl3ik=\", false, function () {\n  return [useMarvelService];\n});\n_c = ComicsList;\nexport default ComicsList;\nvar _c;\n$RefreshReg$(_c, \"ComicsList\");","map":{"version":3,"names":["React","useState","useEffect","useMarvelService","Spinner","ErrorMessage","jsxDEV","_jsxDEV","ComicsList","_s","comicsList","setComicsList","newItemLoading","setNewItemLoading","offset","setOffset","comicsEnded","setComicsEnded","loading","error","getAllComics","onRequest","initial","then","onComicsListLoaded","newComicsList","ended","length","prevList","prevOffset","renderItems","arr","items","map","item","i","className","children","href","src","thumbnail","alt","title","fileName","_jsxFileName","lineNumber","columnNumber","price","errorMessage","spinner","disabled","style","display","onClick","_c","$RefreshReg$"],"sources":["C:/Work/Практика/Обучение Edemu JS/Темы/Marvel/marvel_starter/src/components/comicsList/ComicsList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport useMarvelService from '../../services/MarvelService';\r\nimport Spinner from '../spinner/Spinner';\r\nimport ErrorMessage from '../errorMessage/ErrorMessage';\r\n\r\nimport './comicsList.scss';\r\n\r\nconst ComicsList = () => {\r\n  const [comicsList, setComicsList] = useState([]);\r\n  const [newItemLoading, setNewItemLoading] = useState(false);\r\n  const [offset, setOffset] = useState(0);\r\n  const [comicsEnded, setComicsEnded] = useState(false);\r\n\r\n  const { loading, error, getAllComics } = useMarvelService();\r\n\r\n  useEffect(() => {\r\n    onRequest(offset, true);\r\n  }, [offset]); // Include 'offset' in the dependency array\r\n\r\n  const onRequest = (offset, initial) => {\r\n    initial ? setNewItemLoading(false) : setNewItemLoading(true);\r\n    getAllComics(offset).then(onComicsListLoaded);\r\n  };\r\n\r\n  const onComicsListLoaded = (newComicsList) => {\r\n    let ended = false;\r\n    if (newComicsList.length < 8) {\r\n      ended = true;\r\n    }\r\n    setComicsList((prevList) => [...prevList, ...newComicsList]);\r\n    setNewItemLoading(false);\r\n    setOffset((prevOffset) => prevOffset + 8);\r\n    setComicsEnded(ended);\r\n  };\r\n\r\n  function renderItems(arr) {\r\n    const items = arr.map((item, i) => {\r\n      return (\r\n        <li className=\"comics__item\" key={i}>\r\n          <a href=\"#\">\r\n            <img src={item.thumbnail} alt={item.title} className=\"comics__item-img\" />\r\n            <div className=\"comics__item-name\">{item.title}</div>\r\n            <div className=\"comics__item-price\">{item.price}</div>\r\n          </a>\r\n        </li>\r\n      );\r\n    });\r\n\r\n    return <ul className=\"comics__grid\">{items}</ul>;\r\n  }\r\n\r\n  const items = renderItems(comicsList);\r\n\r\n  const errorMessage = error ? <ErrorMessage /> : null;\r\n  const spinner = loading && !newItemLoading ? <Spinner /> : null;\r\n\r\n  return (\r\n    <div className=\"comics__list\">\r\n      {errorMessage}\r\n      {spinner}\r\n      {items}\r\n      <button\r\n        disabled={newItemLoading}\r\n        style={{ display: comicsEnded ? 'none' : 'block' }}\r\n        className=\"button button__main button__long\"\r\n        onClick={() => onRequest(offset)}\r\n      >\r\n        <div className=\"inner\">load more</div>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComicsList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}